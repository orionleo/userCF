# userCF
<基于用户的协同过滤推荐算法>（基于商品和基于内容的推荐算法思想类似）

## Tools 函数确保每次输出的矩阵有序，使用到的类有以下五个：

  1) CompositeKey - 自定义组合键
  2) myPartitioner - 自定义分区器
  3) mySortComparator - 自定义比较器
  4) myGroupingComparator - 自定义分组器
  5) myReducer - 五个 Mapper 对应相同的 Reducer
  
## 五个 MapReduce 作业运行流程：

                        1) 用户行为列表 -> 用户、商品评分列表；
                               1   2   3   4   5   6
                           A   1   0   5   3   0   0
                           B   0   3   0   0   3   0
                           C           ...
                           D           ...
                           E           ...
                           F           ...
                           
                        2) 用户、商品评分列表 -> 用户与用户的相似度矩阵（评分列表行与行两两相乘计算余弦相似度）；
                                A     B     C     D     E     F
                           A    1     0    0.08  0.15  0.93  0.43
                           B    0     1     0    0.32   0    0.6 
                           C           ...
                           D           ...
                           E           ...
                           F           ...
                           
                        3) 转置用户、商品评分列表；
                               A   B   C   D   E   F
                           1   1   0   5  10   0   0
                           2   0   3   0   0   0   5
                           3           ...
                           4           ...
                           5           ...
                           6           ...
                           
                        4) 相似度矩阵 * 评分列表 = 推荐列表；
                                1     2     3     4     5     6
                           A   2.9   2.2    11   3.9   0.8   1.2
                           B   3.2    6    1.8    0    4.6   0.6
                           C           ...
                           D           ...
                           E           ...
                           F           ...
                           
                         5) 对比用户行为列表，在推荐列表中将用户已经有过操作的商品的值置零。
                                1     2     3     4     5     6
                           A    0    2.2    0     0    0.8   1.2
                           B   3.2    0    1.8    0     0    0.6
                           C           ...
                           D           ...
                           E           ...
                           F           ...
